{% extends "template_citiesoft.html" %}
{% load static %}

{% block title %}Cadastro de Ativo - Citiesoft{% endblock %}

{% block extra_css %}
<link href="{% static 'menu/css/cadastro_ativo.css' %}" rel="stylesheet">
{% endblock %}

{% block page_header %}
<div class="header-actions">
    <div>
        <h1><i class="fas fa-laptop-medical me-2"></i>Cadastro de Ativo</h1>
        <p class="mb-0 mt-2">Registre um novo equipamento no sistema</p>
    </div>
    <a href="{% url 'citiesoft_home' %}" class="btn btn-secondary">
        <i class="fas fa-arrow-left me-2"></i>Voltar
    </a>
</div>
{% endblock %}

{% block content %}

<!-- FORMULÁRIO -->
<div class="row">
    <div class="col-lg-12">
        <div class="content-card">
            <form id="formCadastroAtivo" method="POST" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- SEÇÃO 1: IDENTIFICAÇÃO DO ATIVO -->
                <div class="form-section">
                    <h5 class="section-title">
                        <i class="fas fa-barcode me-2"></i>Identificação do Ativo
                    </h5>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="patrimonio">Número de Patrimônio *</label>
                                <input type="text" class="form-control" id="patrimonio" 
                                    name="patrimonio" placeholder="Ex: NB-2025-001" required>
                                <small class="form-text text-muted">Código único do equipamento</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="tipo">Tipo de Ativo *</label>
                                <select class="form-control" id="tipo" name="tipo" required>
                                    <option value="">Selecione o tipo...</option>
                                    <option value="notebook">Notebook</option>
                                    <option value="desktop">Desktop</option>
                                    <option value="monitor">Monitor</option>
                                    <option value="impressora">Impressora</option>
                                    <option value="scanner">Scanner</option>
                                    <option value="switch">Switch</option>
                                    <option value="roteador">Roteador</option>
                                    <option value="servidor">Servidor</option>
                                    <option value="telefone">Telefone</option>
                                    <option value="webcam">Webcam</option>
                                    <option value="outro">Outro</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SEÇÃO 2: ESPECIFICAÇÕES -->
                <div class="form-section">
                    <h5 class="section-title">
                        <i class="fas fa-microchip me-2"></i>Especificações Técnicas
                    </h5>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="marca">Marca *</label>
                                <input type="text" class="form-control" id="marca" 
                                    name="marca" placeholder="Ex: Dell, HP, Lenovo..." required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="modelo">Modelo *</label>
                                <input type="text" class="form-control" id="modelo" 
                                    name="modelo" placeholder="Ex: Latitude 5530" required>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="serie">Número de Série</label>
                                <input type="text" class="form-control" id="serie" 
                                    name="serie" placeholder="Número de série do equipamento">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="descricao">Descrição</label>
                                <input type="text" class="form-control" id="descricao" 
                                    name="descricao" placeholder="Especificações adicionais">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SEÇÃO 3: ALOCAÇÃO -->
                <div class="form-section">
                    <h5 class="section-title">
                        <i class="fas fa-map-marker-alt me-2"></i>Alocação
                    </h5>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="departamento">Departamento *</label>
                                <select class="form-control" id="departamento" name="departamento" required>
                                    <option value="">Selecione o departamento...</option>
                                    <option value="ti">TI - Tecnologia da Informação</option>
                                    <option value="financeiro">Financeiro</option>
                                    <option value="rh">RH - Recursos Humanos</option>
                                    <option value="vendas">Vendas</option>
                                    <option value="admin">Administrativo</option>
                                    <option value="logistica">Logística</option>
                                    <option value="operacional">Operacional</option>
                                    <option value="outro">Outro</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="responsavel">Responsável *</label>
                                <input type="text" class="form-control" id="responsavel" 
                                    name="responsavel" placeholder="Nome do responsável" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="localizacao">Localização *</label>
                        <input type="text" class="form-control" id="localizacao" 
                            name="localizacao" placeholder="Ex: Sala 101, Prédio A" required>
                    </div>
                </div>

                <!-- SEÇÃO 4: INFORMAÇÕES FINANCEIRAS -->
                <div class="form-section">
                    <h5 class="section-title">
                        <i class="fas fa-dollar-sign me-2"></i>Informações Financeiras
                    </h5>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="dataAquisicao">Data de Aquisição *</label>
                                <input type="date" class="form-control" id="dataAquisicao" 
                                    name="dataAquisicao" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="valor">Valor de Aquisição (R$)</label>
                                <input type="text" class="form-control" id="valor" 
                                    name="valor" placeholder="0.00" >
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="fornecedor">Fornecedor</label>
                        <input type="text" class="form-control" id="fornecedor" 
                            name="fornecedor" placeholder="Nome do fornecedor">
                    </div>
                </div>

                <!-- INFO BOX -->
                <div class="info-box">
                    <h5><i class="fas fa-info-circle me-2"></i>Informações Importantes</h5>
                    <ul>
                        <li>Todos os campos marcados com * são obrigatórios</li>
                        <li>O número de patrimônio deve ser único no sistema</li>
                        <li>Verifique todas as informações antes de enviar</li>
                        <li>Você receberá uma confirmação do cadastro</li>
                    </ul>
                </div>

                <!-- BOTÕES -->
                <div class="form-actions">
                    <button type="submit" class="quick-btn btn-save">
                        <i class="fas fa-save me-2"></i>Cadastrar Ativo
                    </button>
                    <a href="{% url 'citiesoft_home' %}" class="quick-btn btn-cancel">
                        <i class="fas fa-times me-2"></i>Cancelar
                    </a>
                </div>

                <!-- ALERTAS -->
                <div id="successMessage" class="alert alert-success d-none mt-3">
                    <i class="fas fa-check-circle me-2"></i>
                    <div>
                        <strong>Ativo cadastrado com sucesso!</strong><br>
                        ID: <strong id="ativoId"></strong><br>
                        <small>Você será redirecionado em alguns segundos.</small>
                    </div>
                </div>

                <div id="errorMessage" class="alert alert-danger d-none mt-3">
                    <i class="fas fa-exclamation-circle me-2"></i>
                    <div>
                        <strong>Erro ao cadastrar ativo</strong><br>
                        <small>Verifique os dados e tente novamente.</small>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'menu/js/cadastro_ativo.js' %}"></script>
{% endblock %}