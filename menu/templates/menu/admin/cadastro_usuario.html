{% extends 'template_citiesoft.html' %}
{% load static %}

{% block title %}Cadastro de Usuário - Citiesoft{% endblock %}

{% block page_header %}
<h1><i class="fas fa-user-plus"></i> Cadastro de Usuário</h1>
<p>Cadastre novos funcionários ou clientes no sistema - <span id="currentDate"></span></p>
{% endblock %}

{% block extra_css %}
<link href="{% static 'menu/css/cadastro_usuario.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<!-- Seletor de Tipo -->
<div class="type-selector">
    <div class="type-card active" data-type="funcionario">
        <i class="fas fa-user-tie"></i>
        <h3>Funcionário</h3>
        <p>Cadastrar colaborador interno</p>
    </div>
    <div class="type-card" data-type="cliente">
        <i class="fas fa-building"></i>
        <h3>Cliente</h3>
        <p>Cadastrar cliente/empresa</p>
    </div>
</div>

<!-- Formulário de Funcionário -->
<form id="formFuncionario" class="form-section active" method="POST" action="{% url 'cadastro_usuario' %}">
    {% csrf_token %}
    <input type="hidden" name="tipo_usuario" value="funcionario">
    
    <!-- Identificação -->
    <div class="form-card">
        <h3 class="section-title">
            <i class="fas fa-id-card"></i> Identificação do Funcionário
        </h3>
        <div class="form-row">
            <div class="form-group">
                <label>Nome Completo <span class="required">*</span></label>
                <input type="text" name="nome" class="form-control" placeholder="Digite o nome completo" required>
            </div>
            <div class="form-group">
                <label>CPF <span class="required">*</span></label>
                <input type="text" name="cpf" class="form-control cpf-mask" placeholder="000.000.000-00" required>
                <span class="helper-text">Código único do colaborador</span>
            </div>
        </div>
    </div>

    <!-- Contato -->
    <div class="form-card">
        <h3 class="section-title">
            <i class="fas fa-phone"></i> Informações de Contato
        </h3>
        <div class="form-row">
            <div class="form-group">
                <label>Telefone <span class="required">*</span></label>
                <input type="tel" name="telefone" class="form-control phone-mask" placeholder="(00) 00000-0000" required>
            </div>
            <div class="form-group">
                <label>E-mail <span class="required">*</span></label>
                <input type="email" name="email" class="form-control" placeholder="email@exemplo.com" required>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Endereço Completo <span class="required">*</span></label>
                <input type="text" name="endereco" class="form-control" placeholder="Rua, Número, Bairro, Cidade - UF" required>
            </div>
        </div>
    </div>

    <!-- Acesso ao Sistema -->
    <div class="form-card">
        <h3 class="section-title">
            <i class="fas fa-key"></i> Dados de Acesso
        </h3>
        <div class="form-row">
            <div class="form-group">
                <label>Nome de Usuário <span class="required">*</span></label>
                <input type="text" name="username" class="form-control" placeholder="usuario.funcionario" required>
            </div>
            <div class="form-group">
                <label>Departamento</label>
                <select name="departamento" class="form-control">
                    <option value="">Selecione o departamento...</option>
                    <option value="ti">Tecnologia da Informação</option>
                    <option value="suporte">Suporte</option>
                    <option value="administrativo">Administrativo</option>
                    <option value="financeiro">Financeiro</option>
                    <option value="comercial">Comercial</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Senha <span class="required">*</span></label>
                <input type="password" name="senha" class="form-control password-input" placeholder="Mínimo 8 caracteres" required>
                <div class="password-strength" id="passwordStrength"></div>
            </div>
            <div class="form-group">
                <label>Confirmar Senha <span class="required">*</span></label>
                <input type="password" name="confirmar_senha" class="form-control" placeholder="Digite a senha novamente" required>
            </div>
        </div>

        <div class="info-box">
            <i class="fas fa-info-circle"></i>
            <p>A senha deve conter no mínimo 8 caracteres, incluindo letras maiúsculas, minúsculas e números.</p>
        </div>
    </div>

    <!-- Ações -->
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-paper-plane"></i> Enviar Cadastro
        </button>
        <button type="button" class="btn btn-secondary" onclick="resetForm('formFuncionario')">
            <i class="fas fa-times"></i> Cancelar
        </button>
    </div>
</form>

<!-- Formulário de Cliente -->
<form id="formCliente" class="form-section" method="POST" action="{% url 'cadastro_usuario' %}">
    {% csrf_token %}
    <input type="hidden" name="tipo_usuario" value="cliente">
    
    <!-- Identificação -->
    <div class="form-card">
        <h3 class="section-title">
            <i class="fas fa-building"></i> Identificação do Cliente
        </h3>
        <div class="form-row">
            <div class="form-group">
                <label>Nome Completo / Razão Social <span class="required">*</span></label>
                <input type="text" name="nome" class="form-control" placeholder="Digite o nome ou razão social" required>
            </div>
            <div class="form-group">
                <label>CNPJ <span class="required">*</span></label>
                <input type="text" name="cnpj" class="form-control cnpj-mask" placeholder="00.000.000/0000-00" required>
                <span class="helper-text">Código único da empresa</span>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>CPF do Responsável <span class="required">*</span></label>
                <input type="text" name="cpf" class="form-control cpf-mask" placeholder="000.000.000-00" required>
            </div>
            <div class="form-group">
                <label>Nome do Contato Principal</label>
                <input type="text" name="contato_principal" class="form-control" placeholder="Nome do responsável">
            </div>
        </div>
    </div>

    <!-- Contato -->
    <div class="form-card">
        <h3 class="section-title">
            <i class="fas fa-phone"></i> Informações de Contato
        </h3>
        <div class="form-row">
            <div class="form-group">
                <label>Telefone <span class="required">*</span></label>
                <input type="tel" name="telefone" class="form-control phone-mask" placeholder="(00) 00000-0000" required>
            </div>
            <div class="form-group">
                <label>E-mail <span class="required">*</span></label>
                <input type="email" name="email" class="form-control" placeholder="email@empresa.com" required>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Endereço Completo <span class="required">*</span></label>
                <input type="text" name="endereco" class="form-control" placeholder="Rua, Número, Bairro, Cidade - UF" required>
            </div>
        </div>
    </div>

    <!-- Acesso ao Sistema -->
    <div class="form-card">
        <h3 class="section-title">
            <i class="fas fa-key"></i> Dados de Acesso
        </h3>
        <div class="form-row">
            <div class="form-group">
                <label>Nome de Usuário <span class="required">*</span></label>
                <input type="text" name="username" class="form-control" placeholder="usuario.cliente" required>
            </div>
            <div class="form-group">
                <label>Tipo de Contrato</label>
                <select name="tipo_contrato" class="form-control">
                    <option value="">Selecione o tipo...</option>
                    <option value="basico">Básico</option>
                    <option value="intermediario">Intermediário</option>
                    <option value="premium">Premium</option>
                    <option value="enterprise">Enterprise</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Senha <span class="required">*</span></label>
                <input type="password" name="senha" class="form-control password-input" placeholder="Mínimo 8 caracteres" required>
                <div class="password-strength" id="passwordStrengthCliente"></div>
            </div>
            <div class="form-group">
                <label>Confirmar Senha <span class="required">*</span></label>
                <input type="password" name="confirmar_senha" class="form-control" placeholder="Digite a senha novamente" required>
            </div>
        </div>

        <div class="info-box">
            <i class="fas fa-info-circle"></i>
            <p>A senha deve conter no mínimo 8 caracteres, incluindo letras maiúsculas, minúsculas e números.</p>
        </div>
    </div>

    <!-- Ações -->
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-paper-plane"></i> Enviar Cadastro
        </button>
        <button type="button" class="btn btn-secondary" onclick="resetForm('formCliente')">
            <i class="fas fa-times"></i> Cancelar
        </button>
    </div>
</form>
{% endblock %}

{% block extra_js %}
<script src="{% static 'menu/js/cadastro_usuario.js' %}"></script>
{% endblock %}