{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'authentication/css/register.css' %}">
{% endblock %}

{% block content %}

<div class="register-wrapper shadow">

    <div class="text-center mb-4">
        <h2 class="fw-bold text-primary mb-1">Criar Conta</h2>
        <p class="text-muted">Preencha os dados abaixo para se cadastrar</p>
    </div>

    <!-- FUNCIONÁRIO / CLIENTE -->
    <div class="role-box mb-4">
        <button type="button" id="btnFuncionario" class="role-btn active">
            Funcionário
        </button>
        <button type="button" id="btnCliente" class="role-btn">
            Cliente
        </button>
    </div>

    <form method="POST" novalidate>
        {% csrf_token %}

        <!-- DADOS PESSOAIS -->
        <div class="section-title">Dados Pessoais</div>

        <div class="mb-3">
            <label class="form-label fw-bold">Nome Completo</label>
            {{ form.first_name }}
        </div>

        <div class="mb-3">
            <label class="form-label fw-bold">Nome de Usuário</label>
            {{ form.username }}
        </div>

        <div class="mb-3">
            <label class="form-label fw-bold">Email</label>
            {{ form.email }}
        </div>

        <!-- CPF (SEMPRE OBRIGATÓRIO) -->
        <div class="mb-3">
            <label class="form-label fw-bold">CPF</label>
            {{ form.cpf }}
            <div id="cpfError" class="invalid-feedback"></div>
        </div>

        <!-- CNPJ (SÓ PARA CLIENTE) -->
        <div class="mb-3 d-none" id="cnpjBox">
            <label class="form-label fw-bold">CNPJ</label>
            <input type="text" name="cnpj" id="cnpj" class="form-control"
                   placeholder="00.000.000/0000-00">
            <div id="cnpjError" class="invalid-feedback"></div>
        </div>

        <!-- SEGURANÇA -->
        <div class="section-title">Segurança</div>

        <div class="mb-3">
            <label class="form-label fw-bold">Senha</label>
            {{ form.password }}
        </div>

        <div class="mb-3">
            <label class="form-label fw-bold">Confirmação de Senha</label>
            {{ form.password2 }}
        </div>

        <button type="submit" class="btn btn-primary w-100 fw-bold mt-3">
            Cadastrar
        </button>
    </form>

    <div class="login-link mt-4 text-center">
        Já tem uma conta?
        <a href="{% url 'login' %}" class="fw-bold text-primary">Fazer login</a>
    </div>

</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'authentication/js/register.js' %}"></script>
{% endblock %}



